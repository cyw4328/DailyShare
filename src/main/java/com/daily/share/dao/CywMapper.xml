<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC   "-//mybatis.org//DTD Mapper 3.0//EN"
   "http://mybatis.org/dtd/mybatis-3-mapper.dtd"
>

<mapper namespace="com.daily.share.dao.CywDAO">

	<insert id="bigCategoryAdd">
		INSERT INTO mainCategory(main_name,main_admin)VALUES (#{param1},#{param2})
	</insert>
		
	<select id="bigCategoryList" resultType="com.daily.share.dto.CywDTO">
		SELECT main_name,main_num from mainCategory WHERE main_blind = 0
	</select>
	
	<!-- <delete id="bigCategoryDel">
		DELETE FROM mainCategory WHERE main_num = #{param1}
	</delete> -->
	<!-- 대분류 블라인드 처리 -->
	<update id="bigCategoryDel">
		UPDATE mainCategory SET main_blind = 1 WHERE main_num = #{param1}
	</update>
	
	<insert id="middleCategoryAdd">
		INSERT INTO middleCategory(mid_name,main_num,mid_admin)VALUES (#{param1},#{param2},#{param3})
	</insert>
	
	<select id="midCategoyrList" resultType="com.daily.share.dto.CywDTO">
		SELECT mid_name,mid_num,main_num from middleCategory WHERE mid_blind = 0
	</select>
	
	<delete id="midCategoryDel">
		UPDATE middleCategory SET mid_blind = 1 WHERE mid_num = #{param1}
	</delete>
	
	<insert id="menuAdd">
		INSERT INTO menu(menu_name,main_num,mid_num,mem_id)VALUES(#{param1},#{param2},#{param3},#{param4})
	</insert>
	
	<select id="menuList" resultType="com.daily.share.dto.CywDTO">
		SELECT menu_num,menu_name,menu_blind,main_num,mid_num from menu WHERE menu_blind = 0
	</select>
	
	<delete id="menuDel">
		DELETE FROM menu WHERE menu_num = #{param1}
	</delete>
	
	<select id="bigCateFk" resultType="integer">
		SELECT count(main_num) from middleCategory where main_num = #{param1}
	</select>
	
	<select id="midCateFk" resultType="integer">
		SELECT count(menu_num) from menu where mid_num = #{param1}
	</select>

</mapper>